# {%= name %}

> {%= description %}

This module contains an extract of the [language-database of `groc`](http://nevir.github.io/groc/languages.html)
with information about how single- and multi-line comments are written in different languages.

{%= literal("abc") %}

## Usage

```js
var commentPattern = require('{%= name %}');
var p = commentPattern('filename.hbs');
```
This will lead to `p` being: 
```js
    {
         name: 'Handlebars',
         nameMatchers: ['.handlebars', '.hbs'],
         multiLineComment: [
             {start: '<!--', middle: '', end: '-->'},
             {start: '{{!', middle: '', end: '}}'}
         ]
    }
```
It is also possible to retrieve a regular expression that matches comments
(up to the next line of code):
```js
var re = commentPattern.regex('filename.hbs');
```
The result `re` will be:
```js
{
    regex: /^([ \t]*)(<!--([\s\S]*?)-->|\{\{!([\s\S]*?)\}\})[\r\n]*/gm,
    cg: {indent: 1, wholeComment: 2, contentStart: 3},
    middle: [/^ ?/gm, /^ ?/gm],
    name: "Handlebars"
}
```
* **regex** is the actual regular expression. It matches the comments in a string,
  including any empty lines after the comment.
* **cg** are constant values refering to capturing groups of the regex.
  * `match[cg.indent]` contains the spaces that indent comment-start-delimiter.
  * `match[cg.wholeComment]` matches the comment including delimiters.
  * `match[cg.contentStart]` is the first group that captures the contents of the comment
    In this case, there are multiple possible delimiters, so dependending on which 
    delimiter is used, `match[cg.contentStart]` or `match[cg.contentStart + 1]` is
    filled. the others are undefined.
* **middle** contains one pattern for each group after `cg.contentStart` that matches
  the prefix used before comment lines. It can be used to remove this prefix.
* **name** is the language name for debugging purposes.  
## Reference

{%= apidocs("index.js") %}

## The database

The language-specification can be found in the 
`languages`-directory. There is one file
for each language. The actual databases will be
created from these files on `prepublish`.


{% _.forEach(langDB, function(lang) { %}
### {%= lang.name %}

* Name-Matchers: {% _.forEach(lang.nameMatchers, function(matcher) { %} `{%= matcher.toString() %}` {% }); %}
{% _.forEach(lang.multiLineComment, function(mlc) { %}
* Multi-line comment: `{%= literal(mlc.start) %}`, `{%= literal(mlc.middle) %}`, `{%= literal(mlc.end) %}`
{% }); %}
{% _.forEach(lang.singleLineComment, function(slc) { %}
* Single-line comment: `{%= literal(slc) %}`
{% }); %}
{% if (lang.commentsOnly) { %}
* File only consists of comments
{% } %}
{% }); %}

## Updating the language-database

The language-specifications where initially pulled from the  
[language-database of `groc`](http://nevir.github.io/groc/languages.html).
It may still be good to pull an update
from `groc`, which can be done by the following command:

```bash
npm i -d && npm run-script update-from-groc
```

**Please be careful when doing this: Language-specifications may have been changed manually,
so be careful not to override any changed files.**


## Run tests

{%= include("tests") %}

## Related
{%= related(['extract-comments']) %}

## Author
{%= include("author", {github: 'nknapp', twitter: 'knappi79'}) %}

## License
{%= copyright({year: 2015}) %}
{%= license() %}

***

{%= include("footer") %}

